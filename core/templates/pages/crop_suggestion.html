{% extends 'base.html' %}
{% block title %}Crop Suggestion | AgroSmart{% endblock %}
{% block content %}
<div class="flex flex-col items-center text-center">
  <h1 class="font-semibold text-2xl md:text-3xl mb-6">Crop Recommendation</h1>

  {% if not model_loaded %}
    <div class="p-4 mb-6 rounded border border-yellow-300 bg-yellow-50 text-yellow-800">
      Trained model not found. Add a CSV dataset to <code>core/ml/data/crop_dataset.csv</code> and run the training script at <code>core/ml/train_model.py</code> to generate <code>core/ml/crop_model.joblib</code>.
    </div>
  {% endif %}

  <form method="post" class="crop-form grid gap-4 max-w-3xl md:grid-cols-2 place-items-center w-full text-left">
    {% csrf_token %}
    <div class="w-full">
      <label class="block font-medium mb-1 text-left">Soil Type</label>
      {{ form.soil_type }}
    </div>
    <div class="w-full">
      <label class="block font-medium mb-1 text-left">Season</label>
      {{ form.season }}
    </div>
    <div class="md:col-span-2 w-full">
      <label class="block font-medium mb-1 text-left">Rainfall Level</label>
      {{ form.rainfall_level }}
    </div>
    <div class="md:col-span-2">
      <button type="submit" class="btn btn-primary"><i class="ri-seedling-line icon"></i> Recommend</button>
    </div>
  </form>

  {% if prediction %}
    <div class="mt-6 w-full max-w-3xl p-4 rounded-xl border border-green-300 bg-green-50 text-green-800 shadow-sm">
      <p class="font-medium">Recommended crop:</p>
      <p>{{ prediction }}</p>
    </div>
  {% endif %}
</div>
{% endblock %}
